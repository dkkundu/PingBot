{% extends "base.html" %}
{% block content %}
<div class="max-w-4xl mx-auto mt-12 p-10 bg-gray-50 rounded-3xl shadow-2xl">

    <form action="" method="POST" enctype="multipart/form-data" class="bg-white p-8 rounded-2xl shadow-inner grid grid-cols-1 md:grid-cols-3 gap-8">
        
        <!-- Profile Picture -->
        <div class="flex flex-col items-center md:items-start">
            <label class="text-gray-700 font-semibold mb-4">Profile Picture</label>
            <div class="relative cursor-pointer">
                <img id="profilePreview" src="https://via.placeholder.com/150" 
                     alt="Profile Preview" 
                     class="w-40 h-40 rounded-full object-cover border-4 border-indigo-500 shadow-md transition-transform duration-300 hover:scale-105"
                     onclick="document.getElementById('profileInput').click();">

                <input id="profileInput" type="file" name="profile_pic" accept="image/*" 
                       onchange="previewImage(event)" class="hidden">

                <div class="absolute bottom-0 right-0 bg-indigo-600 text-white w-10 h-10 rounded-full flex items-center justify-center shadow-md text-xl hover:bg-indigo-700">
                    âœŽ
                </div>
            </div>
            <span class="text-sm text-gray-500 mt-2">Click image to change</span>
        </div>

        <!-- User Details -->
        <div class="md:col-span-2 space-y-6">
            <!-- Full Name & Email -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="text" name="full_name" placeholder="Full Name" required
                       class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-300">
                <input type="email" name="email" placeholder="Email" required autocomplete="nope"
                       class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-300">
            </div>

            <!-- Password & Phone -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <input type="password" name="password" placeholder="Password" required autocomplete="new-password"
                       class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-300">
                <input type="text" name="phone" placeholder="Phone"
                       class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-300">
            </div>

            <!-- Address & Bio -->
            <input type="text" name="address" placeholder="Address"
                   class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-300">
            <textarea name="bio" placeholder="Bio" rows="4"
                      class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-300"></textarea>
             
             
             {% if current_user.is_superuser %}
            <!-- Role & Checkboxes -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 items-center mt-4">
                <div>
                    <label class="block text-gray-700 font-semibold mb-1">Role</label>
                    <select name="role"
                            class="w-full px-5 py-3 rounded-xl border border-gray-300 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 shadow-sm transition duration-300">
                        <option value="user">User</option>
                        <option value="employee">Employee</option>
                        <option value="admin">Admin</option>
                    </select>
                </div>
               
               
                <label class="flex items-center space-x-2 mt-4 md:mt-0">
                    <input type="checkbox" name="is_approved" class="h-5 w-5 text-indigo-600">
                    <span class="text-gray-700 font-medium">Approved</span>
                </label>

                <label class="flex items-center space-x-2 mt-4 md:mt-0">
                    <input type="checkbox" name="is_superuser" class="h-5 w-5 text-indigo-600">
                    <span class="text-gray-700 font-medium">Superuser</span>
                </label>
                {% endif %}
            </div>

            <!-- Submit Button -->
            <button type="submit"
                    class="w-full py-3 bg-indigo-600 hover:bg-indigo-700 text-white font-bold rounded-2xl shadow-md transition duration-300 mt-6 text-lg">
                Create User
            </button>
        </div>
    </form>
</div>

<script>
function previewImage(event) {
    const reader = new FileReader();
    reader.onload = function(){
        document.getElementById('profilePreview').src = reader.result;
    }
    reader.readAsDataURL(event.target.files[0]);
}
</script>
{% endblock %}
